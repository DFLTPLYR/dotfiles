-- Generated by Matugen

require("base16-colorscheme").setup({
	base00 = "#0f1418",
	base01 = "#090f12",
	base02 = "#171c20",
	base03 = "#3d484f",
	base04 = "#bdc8d1",
	base05 = "#dee3e8",
	base06 = "#2b3135",
	base07 = "#343a3e",

	base08 = "#ffae5d",
	base09 = "#ffbb76",
	base0A = "#a2cce6",
	base0B = "#80d3ff",
	base0C = "#f3992b",
	base0D = "#21baf5",
	base0E = "#1f4b61",
	base0F = "#7ab6db",
})

-- We first theme base16, but we also need to fix some other colors that don't
-- contrast well by default

-- Helper function to set multiple highlight groups at once
local function set_hl_mutliple(groups, value)
	for _, v in pairs(groups) do
		vim.api.nvim_set_hl(0, v, value)
	end
end

-- Make "string" text contrast better
set_hl_mutliple({ "String", "TSString" }, {
	fg = "#ff952a",
})

-- Grey out comments
set_hl_mutliple({ "TSComment", "Comment" }, {
	fg = "#87929a",
	italic = true,
})

-- Color in other highlight groups as you see fit!

set_hl_mutliple({ "TSMethod", "Method" }, {
	fg = "#ffbb76",
})

set_hl_mutliple({ "TSFunction", "Function" }, {
	fg = "#a2cce6",
})

set_hl_mutliple({ "Keyword", "TSKeyword", "TSKeywordFunction", "TSRepeat" }, {
	fg = "#006689",
})

local function set_transparent_bg(groups)
	for _, group in pairs(groups) do
		vim.api.nvim_set_hl(0, group, { bg = "NONE" })
	end
end

set_transparent_bg({
	"Normal",
	"NormalNC",
	"SignColumn",
	"LineNr",
	"EndOfBuffer",
	"StatusLine",
	"StatusLineNC",
	"lualine",
})

-- Bufferline (tab) colors - dynamically configure bufferline with matugen colors
local function set_bufferline_highlights()
	local ok, bufferline = pcall(require, "bufferline")
	if ok then
		bufferline.setup({
			highlights = {
				fill = { bg = "NONE", fg = "NONE" },
				background = { bg = "NONE", fg = "NONE" },
				buffer_visible = { bg = "NONE", fg = "NONE" },
				separator = { bg = "NONE", fg = "NONE" },
				buffer_selected = {
					bg = "#0f1418",
					fg = "#ffbb76",
					bold = true,
				},
			},
		})
	end
end

-- Run after plugins load and on ColorScheme changes
vim.defer_fn(set_bufferline_highlights, 100)
vim.api.nvim_create_autocmd("ColorScheme", {
	pattern = "*",
	callback = set_bufferline_highlights,
})

-- Snacks.nvim highlights - dynamically configure with matugen colors
local function set_snacks_highlights()
	set_hl_mutliple({
		"SnacksPicker",
		"SnacksPickerList",
		"SnacksPickerPreview",
		"SnacksPickerInput",
		"SnacksPickerBox",
	}, {
		bg = "NONE",
	})

	set_hl_mutliple({
		"SnacksPickerBorder",
		"SnacksPickerInputBorder",
		"SnacksPickerPreviewBorder",
		"SnacksPickerListBorder",
		"SnacksPickerBoxBorder",
	}, {
		fg = "#87929a",
		bg = "NONE",
	})

	-- Input window highlights (for explorer search)
	set_hl_mutliple({
		"SnacksInputNormal",
		"SnacksInput",
	}, {
		bg = "NONE",
		fg = "#dee3e8",
	})

	set_hl_mutliple({
		"SnacksInputBorder",
		"SnacksPickerInputBorder",
	}, {
		fg = "#87929a",
		bg = "NONE",
	})

	set_hl_mutliple({
		"SnacksInputTitle",
		"SnacksPickerInputTitle",
	}, {
		fg = "#80d3ff",
		bg = "NONE",
	})

	set_hl_mutliple({
		"SnacksInputIcon",
	}, {
		fg = "#80d3ff",
	})

	-- Search-related highlights
	set_hl_mutliple({
		"SnacksPickerInputSearch",
	}, {
		fg = "#80d3ff",
	})

	-- Additional picker UI elements
	set_hl_mutliple({
		"SnacksPickerTotals",
		"SnacksPickerSpinner",
	}, {
		fg = "#87929a",
	})

	set_hl_mutliple({
		"SnacksPickerLabel",
		"SnacksPickerSpecial",
	}, {
		fg = "#a2cce6",
	})

	set_hl_mutliple({
		"SnacksPickerSelected",
	}, {
		fg = "#80d3ff",
		bold = true,
	})

	set_hl_mutliple({
		"SnacksPickerPrompt",
		"SnacksPickerMatch",
	}, {
		fg = "#80d3ff",
	})

	set_hl_mutliple({
		"SnacksPickerDir",
	}, {
		fg = "#bdc8d1",
	})

	set_hl_mutliple({
		"SnacksIndent",
		"SnacksIndentBlank",
	}, {
		fg = "#3d484f",
	})

	set_hl_mutliple({
		"SnacksIndentScope",
		"SnacksIndentChunk",
	}, {
		fg = "#80d3ff",
	})

	set_hl_mutliple({
		"SnacksNotifierInfo",
		"SnacksNotifierTitleInfo",
		"SnacksNotifierIconInfo",
	}, {
		fg = "#80d3ff",
	})

	set_hl_mutliple({
		"SnacksNotifierWarn",
		"SnacksNotifierTitleWarn",
		"SnacksNotifierIconWarn",
	}, {
		fg = "#ffbb76",
	})

	set_hl_mutliple({
		"SnacksNotifierError",
		"SnacksNotifierTitleError",
		"SnacksNotifierIconError",
	}, {
		fg = "#ffb4ab",
	})

	set_hl_mutliple({
		"SnacksNotifierDebug",
		"SnacksNotifierTitleDebug",
		"SnacksNotifierIconDebug",
	}, {
		fg = "#87929a",
	})

	set_hl_mutliple({
		"SnacksNotifierTrace",
		"SnacksNotifierTitleTrace",
		"SnacksNotifierIconTrace",
	}, {
		fg = "#a2cce6",
	})

	set_hl_mutliple({
		"SnacksNotifierHistory",
		"SnacksNotifierHistoryTitle",
		"SnacksNotifierHistoryDateTime",
		"SnacksNotifierHistoryType",
	}, {
		fg = "#bdc8d1",
	})

	set_hl_mutliple({
		"SnacksDashboardHeader",
		"SnacksDashboardFooter",
	}, {
		fg = "#80d3ff",
	})

	set_hl_mutliple({
		"SnacksDashboardDesc",
		"SnacksDashboardIcon",
	}, {
		fg = "#bdc8d1",
	})

	set_hl_mutliple({
		"SnacksDashboardKey",
		"SnacksDashboardSpecial",
	}, {
		fg = "#ffbb76",
	})

	set_hl_mutliple({
		"SnacksDashboardDir",
	}, {
		fg = "#87929a",
	})
end

-- Run immediately and on ColorScheme changes
set_snacks_highlights()
vim.api.nvim_create_autocmd("ColorScheme", {
	pattern = "*",
	callback = set_snacks_highlights,
})

-- Define custom lualine theme using matugen colors
local lualine_theme = {
	normal = {
		a = {
			bg = "#21baf5",
			fg = "#002636",
			gui = "bold",
		},
		b = { bg = "#1b2024", fg = "#dee3e8" },
		c = { bg = "NONE", fg = "#dee3e8" },
	},
	insert = {
		a = {
			bg = "#1f4b61",
			fg = "#bde6ff",
			gui = "bold",
		},
		b = { bg = "#1b2024", fg = "#dee3e8" },
		c = { bg = "NONE", fg = "#dee3e8" },
	},
	visual = {
		a = {
			bg = "#f3992b",
			fg = "#361d00",
			gui = "bold",
		},
		b = { bg = "#1b2024", fg = "#dee3e8" },
		c = { bg = "NONE", fg = "#dee3e8" },
	},
	replace = {
		a = {
			bg = "#93000a",
			fg = "#ffdad6",
			gui = "bold",
		},
		b = { bg = "#1b2024", fg = "#dee3e8" },
		c = { bg = "NONE", fg = "#dee3e8" },
	},
	command = {
		a = {
			bg = "#3d484f",
			fg = "#bdc8d1",
			gui = "bold",
		},
		b = { bg = "#1b2024", fg = "#dee3e8" },
		c = { bg = "NONE", fg = "#dee3e8" },
	},
	inactive = {
		a = { bg = "#171c20", fg = "#87929a", gui = "bold" },
		b = { bg = "#171c20", fg = "#87929a" },
		c = { bg = "NONE", fg = "#87929a" },
	},
}
-- Apply the theme to lualine
require("lualine").setup({
	options = {
		theme = lualine_theme,
	},
})
